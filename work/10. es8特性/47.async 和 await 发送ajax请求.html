<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<script>
  // 发送ajax请求，返回promise对象
  function sendAjax(url) {
    return new Promise((resolve, reject) => {
      // 1. 创建对象
      const x = new XMLHttpRequest()
  
      // 2. 初始化
      x.open('GET', url)
  
      // 3. 发送信息
      x.send()
  
      // 4. 事件绑定
      x.onreadystatechange = function () {
        if(x.readyState === 4 ) {
          if(x.status >= 200 && x.status < 300) {
            // 成功
            resolve(x.response)
          } else {
            reject(x.response)
          }
        }
      }
    })
  }

  // .then 测试
  // sendAjax("").then(val => {
  //   console.log(val)
  // }, reason => {})
  
  // // async 和 await 测试
  async function main() {
    // 发送ajax请求
    let result = await sendAjax('')
  
    console.log(result)
  }

  main()
</script>

</body>
</html>
